<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Snakes</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.12.3/application.js' type='text/javascript'></script>
    <link href='./assets/0.12.3/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="shortcut icon" type="image/png" href="./assets/0.12.3/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.12.3/favicon.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.12.3/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2025-08-14T07:50:56+00:00">2025-08-14T07:50:56+00:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="red">
  69.57%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         1534.45
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>3</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>322</b> relevant lines,
    <span class="green"><b>224</b> lines covered</span> and
    <span class="red"><b>98</b> lines missed. </span>
    (<span class="red">
  69.57%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1015b89735359fa1a1ed58793f24dceea347bd67" class="src_link" title="snakes/ruby/djdefi/app/app.rb">snakes/ruby/djdefi/app/app.rb</a></td>
            <td class="red strong cell--number t-file__coverage">51.52 %</td>
            <td class="cell--number">79</td>
            <td class="cell--number">33</td>
            <td class="cell--number">17</td>
            <td class="cell--number">16</td>
            <td class="cell--number">1.27</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#ac6f7d49a6ce67e8bcfe2f6709684cb988b44406" class="src_link" title="snakes/ruby/djdefi/app/move.rb">snakes/ruby/djdefi/app/move.rb</a></td>
            <td class="red strong cell--number t-file__coverage">71.13 %</td>
            <td class="cell--number">677</td>
            <td class="cell--number">284</td>
            <td class="cell--number">202</td>
            <td class="cell--number">82</td>
            <td class="cell--number">1736.31</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#a0fd061293fd095d34df636e6fce494a596225be" class="src_link" title="snakes/ruby/djdefi/app/util.rb">snakes/ruby/djdefi/app/util.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">15</td>
            <td class="cell--number">5</td>
            <td class="cell--number">5</td>
            <td class="cell--number">0</td>
            <td class="cell--number">187.80</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>


        
      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.22.0
        and simplecov-html v0.12.3<br/>
        using Unit Tests
      </div>

      <div class="source_files">
      
        <div class="source_table" id="1015b89735359fa1a1ed58793f24dceea347bd67">
  <div class="header">
    <h3>snakes/ruby/djdefi/app/app.rb</h3>
    <h4>
      <span class="red">
  51.52%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>33</b> relevant lines.
      <span class="green"><b>17</b> lines covered</span> and
      <span class="red"><b>16</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="never" data-hits="" data-linenumber="1">
            
            

            

            <code class="ruby"># frozen_string_literal: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;rack&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;rack/contrib&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;sinatra&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./util&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./move&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">use Rack::PostBodyContentTypeParser</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby"># This function is called when you register your Battlesnake on play.battlesnake.com</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby"># It controls your Battlesnake appearance and author permissions.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby"># TIP: If you open your Battlesnake URL in browser you should see this data</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="15">
            <span class="hits">1</span>
            

            

            <code class="ruby">get &#39;/&#39; do</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="16">
            <span class="hits">1</span>
            

            

            <code class="ruby">  appearance = {</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">    apiversion: &#39;1&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">    author: &#39;djdefi&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">    color: &#39;#ff33fb&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    head: &#39;gamer&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">    tail: &#39;virus&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">  }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="24">
            <span class="hits">1</span>
            

            

            <code class="ruby">  camelcase(appearance).to_json</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby"># This function is called everytime your snake is entered into a game.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby"># rack.request.form_hash contains information about the game that&#39;s about to be played.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby"># TODO: Use this function to decide how your snake is going to look on the board.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="30">
            <span class="hits">1</span>
            

            

            <code class="ruby">post &#39;/start&#39; do</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            
            

            

            <code class="ruby">  request = underscore(env[&#39;rack.request.form_hash&#39;])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">  puts &#39;[GAME START]&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            
            

            

            <code class="ruby">  &quot;OK\n&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby"># This function is called on every turn of a game. It&#39;s how your snake decides where to move.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby"># Valid moves are &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, or &quot;right&quot;.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby"># TODO: Use the information in rack.request.form_hash to decide your next move.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="40">
            <span class="hits">1</span>
            

            

            <code class="ruby">post &#39;/move&#39; do</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">    # Puts raw request body</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="42">
            <span class="hits">6</span>
            

            

            <code class="ruby">  puts request.body.read</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="43">
            <span class="hits">6</span>
            

            

            <code class="ruby">  request = underscore(env[&#39;rack.request.form_hash&#39;])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">  # Implement move logic in app/move.rb</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="46">
            <span class="hits">6</span>
            

            

            <code class="ruby">  response = move(request)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="47">
            <span class="hits">6</span>
            

            

            <code class="ruby">  content_type :json</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="48">
            <span class="hits">6</span>
            

            

            <code class="ruby">  camelcase(response).to_json</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby"># This function is called when a game your Battlesnake was in ends.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby"># It&#39;s purely for informational purposes, you don&#39;t have to make any decisions here.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="53">
            <span class="hits">1</span>
            

            

            <code class="ruby">post &#39;/end&#39; do</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">  puts &#39;[GAME END]&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            
            

            

            <code class="ruby">  # Example response: {:game=&gt;{:id=&gt;&quot;f9ffcf38-5fa1-4b2b-b002-cea8038b4186&quot;, :ruleset=&gt;{:name=&gt;&quot;standard&quot;, :version=&gt;&quot;v1.0.22&quot;, :settings=&gt;{:food_spawn_chance=&gt;15, :minimum_food=&gt;1, :hazard_damage_per_turn=&gt;0, :royale=&gt;{:shrink_every_n_turns=&gt;0}, :squad=&gt;{:allow_body_collisions=&gt;false, :shared_elimination=&gt;false, :shared_health=&gt;false, :shared_length=&gt;false}}}, :timeout=&gt;500}, :turn=&gt;29, :board=&gt;{:height=&gt;11, :width=&gt;11, :snakes=&gt;[{:id=&gt;&quot;gs_mKHqbptvV64kvGwbqXG49QFC&quot;, :name=&gt;&quot;code-snek-dev&quot;, :latency=&gt;&quot;97&quot;, :health=&gt;100, :body=&gt;[{:x=&gt;7, :y=&gt;4}, {:x=&gt;7, :y=&gt;3}, {:x=&gt;7, :y=&gt;2}, {:x=&gt;7, :y=&gt;1}, {:x=&gt;7, :y=&gt;0}, {:x=&gt;8, :y=&gt;0}, {:x=&gt;9, :y=&gt;0}, {:x=&gt;9, :y=&gt;0}], :head=&gt;{:x=&gt;7, :y=&gt;4}, :length=&gt;8, :shout=&gt;&quot;&quot;, :squad=&gt;&quot;&quot;}], :food=&gt;[{:x=&gt;9, :y=&gt;5}, {:x=&gt;10, :y=&gt;5}, {:x=&gt;0, :y=&gt;10}], :hazards=&gt;[]}, :you=&gt;{:id=&gt;&quot;gs_mKHqbptvV64kvGwbqXG49QFC&quot;, :name=&gt;&quot;code-snek-dev&quot;, :latency=&gt;&quot;97&quot;, :health=&gt;100, :body=&gt;[{:x=&gt;7, :y=&gt;4}, {:x=&gt;7, :y=&gt;3}, {:x=&gt;7, :y=&gt;2}, {:x=&gt;7, :y=&gt;1}, {:x=&gt;7, :y=&gt;0}, {:x=&gt;8, :y=&gt;0}, {:x=&gt;9, :y=&gt;0}, {:x=&gt;9, :y=&gt;0}], :head=&gt;{:x=&gt;7, :y=&gt;4}, :length=&gt;8, :shout=&gt;&quot;&quot;, :squad=&gt;&quot;&quot;}}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">  # Output the last request form_hash to the terminal for debugging purposes</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="59">
            
            

            

            <code class="ruby">  request = underscore(env[&#39;rack.request.form_hash&#39;])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="60">
            
            

            

            <code class="ruby">  puts request</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            
            

            

            <code class="ruby">  # Output the game id, ruleset name, turn number, your health, all snakes names + health (if any).</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="63">
            
            

            

            <code class="ruby">  puts &quot;Game ID: https://play.battlesnake.com/g/#{request[:game][:id]}/&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="64">
            
            

            

            <code class="ruby">  puts &quot;Ruleset: #{request[:game][:ruleset][:name]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="65">
            
            

            

            <code class="ruby">  puts &quot;Last Turn: #{request[:turn]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="66">
            
            

            

            <code class="ruby">  puts &quot;Your Health: #{request[:you][:health]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="67">
            
            

            

            <code class="ruby">  request[:board][:snakes].each do |snake|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="68">
            
            

            

            <code class="ruby">    puts &quot;Surviving Snake: #{snake[:name]} Health: #{snake[:health]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            
            

            

            <code class="ruby">    # If the snake is you, we won!</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            
            

            

            <code class="ruby">    if snake[:id] == request[:you][:id]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="72">
            
            

            

            <code class="ruby">      puts &#39;You won!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="74">
            
            

            

            <code class="ruby">      puts &#39;You lost!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="78">
            
            

            

            <code class="ruby">  &quot;OK\n&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="79">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="ac6f7d49a6ce67e8bcfe2f6709684cb988b44406">
  <div class="header">
    <h3>snakes/ruby/djdefi/app/move.rb</h3>
    <h4>
      <span class="red">
  71.13%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>284</b> relevant lines.
      <span class="green"><b>202</b> lines covered</span> and
      <span class="red"><b>82</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="never" data-hits="" data-linenumber="1">
            
            

            

            <code class="ruby"># frozen_string_literal: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">$VERBOSE = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">$stdout.sync = true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"># This function is called on every turn of a game. It&#39;s how your Battlesnake decides where to move.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"># Valid moves are &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, or &quot;right&quot;.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby"># TODO: Use the information in board to decide your next move.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            <span class="hits">1</span>
            

            

            <code class="ruby">def move(board)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  # Record the start time of the turn</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="11">
            <span class="hits">6</span>
            

            

            <code class="ruby">  start_time = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">  # Health find threshold variable clamped to 0-100</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="14">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @health_threshold = 99</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="15">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @health_threshold.clamp(0, 100)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">  #puts board</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  # Example board object:</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">  # {:game=&gt;{:id=&gt;&quot;f767ba58-945c-4f5a-b5b6-12990dc27ab1&quot;, :ruleset=&gt;{:name=&gt;&quot;standard&quot;, :version=&gt;&quot;v1.0.17&quot;}, :timeout=&gt;500}, :turn=&gt;0, :board=&gt;{:height=&gt;11, :width=&gt;11, :snakes=&gt;[{:id=&gt;&quot;gs_9PwkMwt7S3CtB9vFGjVbH39V&quot;, :name=&gt;&quot;ruby-danger-noodle&quot;, :latency=&gt;&quot;&quot;, :health=&gt;100, :body=&gt;[{:x=&gt;9, :y=&gt;9}, {:x=&gt;9, :y=&gt;9}, {:x=&gt;9, :y=&gt;9}], :head=&gt;{:x=&gt;9, :y=&gt;9}, :length=&gt;3, :shout=&gt;&quot;&quot;}, {:id=&gt;&quot;gs_qrT8RGkMKCyYCtpphtkTfQkX&quot;, :name=&gt;&quot;LoopSnake&quot;, :latency=&gt;&quot;&quot;, :health=&gt;100, :body=&gt;[{:x=&gt;9, :y=&gt;1}, {:x=&gt;9, :y=&gt;1}, {:x=&gt;9, :y=&gt;1}], :head=&gt;{:x=&gt;9, :y=&gt;1}, :length=&gt;3, :shout=&gt;&quot;&quot;}], :food=&gt;[{:x=&gt;8, :y=&gt;10}, {:x=&gt;8, :y=&gt;2}, {:x=&gt;5, :y=&gt;5}], :hazards=&gt;[]}, :you=&gt;{:id=&gt;&quot;gs_9PwkMwt7S3CtB9vFGjVbH39V&quot;, :name=&gt;&quot;ruby-danger-noodle&quot;, :latency=&gt;&quot;&quot;, :health=&gt;100, :body=&gt;[{:x=&gt;9, :y=&gt;9}, {:x=&gt;9, :y=&gt;9}, {:x=&gt;9, :y=&gt;9}], :head=&gt;{:x=&gt;9, :y=&gt;9}, :length=&gt;3, :shout=&gt;&quot;&quot;}}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">  # Puts board height and width</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="23">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @height = board[:board][:height].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="24">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @width = board[:board][:width].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  # Puts all the snakes in an array</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="27">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snakes = board[:board][:snakes] || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">  # puts &quot;There are the following snakes: #{@snakes}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">  # Puts all the food in an array</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="31">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @food = board[:board][:food] || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">   #puts &quot;There is food at: #{@food}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">  # Our health</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="35">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @health = board[:you][:health].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">  # Puts all the hazards in an array</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="38">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @hazards = board[:board][:hazards] || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">  # puts &quot;There are hazards at: #{@hazards}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">  # Puts the snakes length</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="42">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @length = board[:you][:length].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby">  # puts &quot;My length is: #{@length}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">  # Puts the ruleset name</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="46">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @game_mode = board[:game][:ruleset][:name]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">  # Puts the tail cells of all the snakes</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="49">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snake_tails = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="50">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snakes.each do |snake|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="51">
            <span class="hits">13</span>
            

            

            <code class="ruby">    @snake_tails &lt;&lt; snake[:body][-1]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            
            

            

            <code class="ruby">  # My tail coordinates</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="55">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @my_tail = [{:x =&gt; board[:you][:body][-1][:x], :y =&gt; board[:you][:body][-1][:y]}]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            
            

            

            <code class="ruby">  #puts &quot;My tail is: #{@my_tail}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">  # Puts x, y coordinates hash of all cells on the board</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="59">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @board_hash = board[:board][:height].to_i.times.map do |i|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="66" data-linenumber="60">
            <span class="hits">66</span>
            

            

            <code class="ruby">    board[:board][:width].to_i.times.map do |j|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="61">
            <span class="hits">726</span>
            

            

            <code class="ruby">      { x: j, y: i }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            
            

            

            <code class="ruby">  end.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="64">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            
            

            

            <code class="ruby">  # Puts x, y coordinates hash of my snake&#39;s head</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="66">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @head = board[:you][:head]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            
            

            

            <code class="ruby">  # Set @head x and y to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="68">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @head[:x] = @head[:x].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="69">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @head[:y] = @head[:y].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            
            

            

            <code class="ruby">  # Puts x, y coordinates hash of my snake&#39;s body</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="72">
            <span class="hits">42</span>
            

            

            <code class="ruby">  @body = board[:you][:body].map { |b| { x: b[:x], y: b[:y] } }.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="74">
            
            

            

            <code class="ruby">  # Puts where all other snakes bodies and heads are</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="75">
            <span class="hits">19</span>
            

            

            <code class="ruby">  @snakes_bodies = board[:board][:snakes].map { |s| s[:body] }.flatten + @body || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            
            

            

            <code class="ruby">  # Puts where all snakes heads are</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="78">
            <span class="hits">19</span>
            

            

            <code class="ruby">  @snakes_heads = board[:board][:snakes].map { |s| s[:head] }.flatten || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="79">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="80">
            
            

            

            <code class="ruby">  # Puts where all snakes heads are, but not my head</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="81">
            <span class="hits">19</span>
            

            

            <code class="ruby">  @snakes_heads_not_my_head = board[:board][:snakes].map { |s| s[:head] }.flatten - [@head] || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            
            

            

            <code class="ruby">  # Remove my head from the snakes heads</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="83">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snakes_heads_not_my_head.delete(@head)  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            
            

            

            <code class="ruby">  # Puts where all snakes bodies are, but not my body</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="86">
            <span class="hits">19</span>
            

            

            <code class="ruby">  @snakes_bodies_not_my_body = board[:board][:snakes].map { |s| s[:body] }.flatten - @body || []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            
            

            

            <code class="ruby">  # Remove my body from the snakes bodies</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="88">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snakes_bodies_not_my_body.delete(@body)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="90">
            
            

            

            <code class="ruby">  # Puts where all food cells which are also hazard cells</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="91">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @food_hazards = @food.select do |f|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="24" data-linenumber="92">
            <span class="hits">24</span>
            

            

            <code class="ruby">    @hazards.any? do |h|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="441" data-linenumber="93">
            <span class="hits">441</span>
            

            

            <code class="ruby">      f[:x] == h[:x] &amp;&amp; f[:y] == h[:y]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="94">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="96">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            
            

            

            <code class="ruby">  # Function to determine x,y coordinate pair hash of each cell adjacent to the head</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="98">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def adjacent_cells(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="99">
            
            

            

            <code class="ruby">    # Set x and y coordinates to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1297" data-linenumber="100">
            <span class="hits">1297</span>
            

            

            <code class="ruby">    x = x.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1297" data-linenumber="101">
            <span class="hits">1297</span>
            

            

            <code class="ruby">    y = y.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1297" data-linenumber="102">
            <span class="hits">1297</span>
            

            

            <code class="ruby">    [{ x: x - 1, y: y }, { x: x + 1, y: y }, { x: x, y: y - 1 }, { x: x, y: y + 1 }]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="103">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="104">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="105">
            
            

            

            <code class="ruby">  # Function to determine x,y coordinate pair hash of each cell adjacent to the head within 3 cells</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="106">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def adjacent_cells_3(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="107">
            
            

            

            <code class="ruby">    # Set x and y coordinates to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="108">
            <span class="hits">6</span>
            

            

            <code class="ruby">    x = x.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="109">
            <span class="hits">6</span>
            

            

            <code class="ruby">    y = y.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="110">
            <span class="hits">6</span>
            

            

            <code class="ruby">    [{ x: x - 1, y: y }, { x: x + 1, y: y }, { x: x, y: y - 1 }, { x: x, y: y + 1 }, { x: x - 1, y: y - 1 }, { x: x - 1, y: y + 1 }, { x: x + 1, y: y - 1 }, { x: x + 1, y: y + 1 }]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="111">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="112">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="113">
            
            

            

            <code class="ruby">  # Food adjacent cells</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="30" data-linenumber="114">
            <span class="hits">30</span>
            

            

            <code class="ruby">  @food_adjacent_cells = @food.map { |f| adjacent_cells(f[:x], f[:y]) }.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="115">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="116">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @head_neighbors = adjacent_cells(@head[:x], @head[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="117">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="118">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @three_head_neighbors = adjacent_cells_3(@head[:x], @head[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="119">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="120">
            <span class="hits">13</span>
            

            

            <code class="ruby">  @other_snakes_head_neighbors = @snakes_heads_not_my_head.map { |s| adjacent_cells(s[:x], s[:y]) }.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="121">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="122">
            
            

            

            <code class="ruby">  # Shared neighbors are cells which are in both @head_neighbors and @other_snakes_head_neighbors</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="30" data-linenumber="123">
            <span class="hits">30</span>
            

            

            <code class="ruby">  @shared_neighbors = @head_neighbors.select { |h| @other_snakes_head_neighbors.include?(h) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="124">
            
            

            

            <code class="ruby">  #puts &quot;Shared neighbors are: #{@shared_neighbors}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="126">
            
            

            

            <code class="ruby">  # Id, Name, total Lengths, Coordinates of all snakes heads</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="127">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snakes_info = board[:board][:snakes].map do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="128">
            <span class="hits">13</span>
            

            

            <code class="ruby">    { id: s[:id], name: s[:name], length: s[:body].length, head: s[:head],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="129">
            
            

            

            <code class="ruby">      head_neighbors: adjacent_cells(s[:head][:x], s[:head][:y]) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="130">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="131">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="132">
            
            

            

            <code class="ruby">  # My snake id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="133">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @id = board[:you][:id]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="134">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="135">
            
            

            

            <code class="ruby">  # Puts where all heads of shorter snakes are</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="136">
            <span class="hits">19</span>
            

            

            <code class="ruby">  @shorter_snake_heads = board[:board][:snakes].map { |s| s[:head] }.flatten.select do |h|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="137">
            <span class="hits">13</span>
            

            

            <code class="ruby">    @snakes.any? do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="29" data-linenumber="138">
            <span class="hits">29</span>
            

            

            <code class="ruby">      s[:length] &lt; @length &amp;&amp; h[:x] == s[:head][:x] &amp;&amp; h[:y] == s[:head][:y]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="140">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="141">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="142">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="143">
            
            

            

            <code class="ruby">  # @shared_longer_snakes are cells which are in both @head_neighbors and @other_snakes_head_neighbors and where the length of the neighboring snake is longer than my snake</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="144">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @shared_longer_snakes = @shared_neighbors.select do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="145">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @snakes.any? do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="146">
            <span class="hits">3</span>
            

            

            <code class="ruby">      s[:length] &gt; @length &amp;&amp; s[:head][:x] == s[:head][:x] &amp;&amp; s[:head][:y] == s[:head][:y]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="147">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="148">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="149">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="150">
            
            

            

            <code class="ruby">  # @shared_shorter_snakes are cells which are in both @head_neighbors and @other_snakes_head_neighbors and where the length of the neighboring snake is shorter than my snake</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="151">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @shared_shorter_snakes = @shared_neighbors.select do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="152">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @snakes.any? do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="153">
            <span class="hits">6</span>
            

            

            <code class="ruby">      s[:length] &lt; @length &amp;&amp; s[:head][:x] == s[:head][:x] &amp;&amp; s[:head][:y] == s[:head][:y]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="154">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="155">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="156">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="157">
            
            

            

            <code class="ruby">  # @shared_same_length_snakes are cells which are in both @head_neighbors and @other_snakes_head_neighbors and where the length of the neighboring snake is the same as my snake</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="158">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @shared_same_length_snakes = @shared_neighbors.select do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="159">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @snakes.any? do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="160">
            <span class="hits">6</span>
            

            

            <code class="ruby">      s[:length] == @length &amp;&amp; s[:head][:x] == s[:head][:x] &amp;&amp; s[:head][:y] == s[:head][:y]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="161">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="162">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="163">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="164">
            
            

            

            <code class="ruby">  # Each time the snake eats a piece of food, its tail grows longer, making the game increasingly difficult.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="165">
            
            

            

            <code class="ruby">  # The user controls the direction of the snake&#39;s head (up, down, left, or right), and the snake&#39;s body follows. The player cannot stop the snake from moving while the game is in progress.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="166">
            
            

            

            <code class="ruby">  # The board is a 2-dimensional array of cells, each cell containing a hash with x and y coordinates. The board is of variable size, and is surronded by walls.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="167">
            
            

            

            <code class="ruby">  # Other snakes and hazards are present on the board and should be avoided.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="168">
            
            

            

            <code class="ruby">  # The board is updated every turn.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="169">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="170">
            <span class="hits">19</span>
            

            

            <code class="ruby">  @my_snake = @snakes.select { |s| s[:id] == board[:you][:id] }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="171">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="172">
            
            

            

            <code class="ruby">  # Function to check if a cell is a wall</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="173">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def is_wall?(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="174">
            
            

            

            <code class="ruby">    # If game mode is wrapped, set false, else perform wall check</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="175">
            <span class="hits">726</span>
            

            

            <code class="ruby">    if @game_mode == &#39;wrapped&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="176">
            
            

            

            <code class="ruby">      false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="177">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="178">
            <span class="hits">726</span>
            

            

            <code class="ruby">      if x.negative? || y.negative? || x &gt; @width || y &gt; @height</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="179">
            
            

            

            <code class="ruby">        true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="180">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="181">
            <span class="hits">726</span>
            

            

            <code class="ruby">        false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="182">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="183">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="184">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="185">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="186">
            
            

            

            <code class="ruby">  # Function to check if a cell is a snake body</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="187">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def is_snake?(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="188">
            
            

            

            <code class="ruby">    @snakes_bodies.select { |c| c[:x] == x &amp;&amp; c[:y] == y }.empty? &amp;&amp; @snakes_heads.select do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="189">
            
            

            

            <code class="ruby">      c[:x] == x &amp;&amp; c[:y] == y</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="190">
            
            

            

            <code class="ruby">    end.empty? &amp;&amp; @body.select do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="191">
            
            

            

            <code class="ruby">                    c[:x] == x &amp;&amp; c[:y] == y</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="192">
            
            

            

            <code class="ruby">                  end.empty?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="193">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="194">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="195">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @all_occupied_cells = (@snakes_heads + @snakes_bodies + @head.to_a + @body).flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="196">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="197">
            
            

            

            <code class="ruby">  # x, y coordinates hash of all empty cells on the board</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="198">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @empty_cells = @board_hash - @all_occupied_cells + @food</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="199">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="200">
            
            

            

            <code class="ruby">  # x, y coordinates of each corner cell</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="201">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @corners = [{ x: 0, y: 0 }, { x: @width - 1, y: 0 }, { x: 0, y: @height - 1 },</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="202">
            
            

            

            <code class="ruby">              { x: @width - 1, y: @height - 1 }]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="203">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="204">
            
            

            

            <code class="ruby">  # x, y coordinates array of every cell around the edge of the board</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="138" data-linenumber="205">
            <span class="hits">138</span>
            

            

            <code class="ruby">  @edges = @width.times.map { |x| [{ x: x, y: 0 }, { x: x, y: @height - 1 }] }.flatten + @height.times.map do |y| [{ x: 0, y: y }, { x: @width - 1, y: y }] end.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="206">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="207">
            
            

            

            <code class="ruby">  # x, y coordinates array of every cell adjacent to cells on the edge of the board</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="208">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @edge_adjacent_cells = @edges.each_with_object([]) do |e, a|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="264" data-linenumber="209">
            <span class="hits">264</span>
            

            

            <code class="ruby">    a &lt;&lt; adjacent_cells(e[:x], e[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="210">
            
            

            

            <code class="ruby">  end.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="211">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="212">
            
            

            

            <code class="ruby">  # x, y coordinates array of every cell adjacent to hazard cells</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="213">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @hazard_adjacent_cells = @hazards.each_with_object([]) do |h, a|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="125" data-linenumber="214">
            <span class="hits">125</span>
            

            

            <code class="ruby">    a &lt;&lt; adjacent_cells(h[:x], h[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="215">
            
            

            

            <code class="ruby">  end.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="216">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="217">
            
            

            

            <code class="ruby">  # Cells within 1 cell of any snake body</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="132" data-linenumber="218">
            <span class="hits">132</span>
            

            

            <code class="ruby">  @snakes_bodies_neighbors = @snakes_bodies.map { |s| adjacent_cells(s[:x], s[:y]) }.flatten</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="219">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="220">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="221">
            
            

            

            <code class="ruby">  # Function to determine the direction between two cell x,y coordinates from the perspective of the snake</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="222">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def direction_between(x1, y1, x2, y2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="223">
            
            

            

            <code class="ruby">    # Set values to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="224">
            <span class="hits">726</span>
            

            

            <code class="ruby">    x1 = x1.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="225">
            <span class="hits">726</span>
            

            

            <code class="ruby">    y1 = y1.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="226">
            <span class="hits">726</span>
            

            

            <code class="ruby">    x2 = x2.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="227">
            <span class="hits">726</span>
            

            

            <code class="ruby">    y2 = y2.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="228">
            <span class="hits">726</span>
            

            

            <code class="ruby">    if x1 &lt; x2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="418" data-linenumber="229">
            <span class="hits">418</span>
            

            

            <code class="ruby">      &#39;right&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="308" data-linenumber="230">
            <span class="hits">308</span>
            

            

            <code class="ruby">    elsif x1 &gt; x2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="242" data-linenumber="231">
            <span class="hits">242</span>
            

            

            <code class="ruby">      &#39;left&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="66" data-linenumber="232">
            <span class="hits">66</span>
            

            

            <code class="ruby">    elsif y1 &lt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="43" data-linenumber="233">
            <span class="hits">43</span>
            

            

            <code class="ruby">      &#39;up&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="23" data-linenumber="234">
            <span class="hits">23</span>
            

            

            <code class="ruby">    elsif y1 &gt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="235">
            <span class="hits">17</span>
            

            

            <code class="ruby">      &#39;down&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="236">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="237">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="238">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="239">
            
            

            

            <code class="ruby">  # Function to determine the two possible directions between two cell x,y coordinates from the perspective of the snake (x1, y1)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="240">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def possible_directions_between(x1, y1, x2, y2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="241">
            
            

            

            <code class="ruby">    # Set values to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="242">
            <span class="hits">726</span>
            

            

            <code class="ruby">    x1 = x1.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="243">
            <span class="hits">726</span>
            

            

            <code class="ruby">    y1 = y1.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="244">
            <span class="hits">726</span>
            

            

            <code class="ruby">    x2 = x2.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="245">
            <span class="hits">726</span>
            

            

            <code class="ruby">    y2 = y2.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="246">
            <span class="hits">726</span>
            

            

            <code class="ruby">    if x1 &lt; x2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="418" data-linenumber="247">
            <span class="hits">418</span>
            

            

            <code class="ruby">      if y1 &lt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="326" data-linenumber="248">
            <span class="hits">326</span>
            

            

            <code class="ruby">        %w[right up]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="92" data-linenumber="249">
            <span class="hits">92</span>
            

            

            <code class="ruby">      elsif y1 &gt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="54" data-linenumber="250">
            <span class="hits">54</span>
            

            

            <code class="ruby">        %w[right down]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="251">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="308" data-linenumber="252">
            <span class="hits">308</span>
            

            

            <code class="ruby">    elsif x1 &gt; x2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="242" data-linenumber="253">
            <span class="hits">242</span>
            

            

            <code class="ruby">      if y1 &lt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="104" data-linenumber="254">
            <span class="hits">104</span>
            

            

            <code class="ruby">        %w[left down]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="138" data-linenumber="255">
            <span class="hits">138</span>
            

            

            <code class="ruby">      elsif y1 &gt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="116" data-linenumber="256">
            <span class="hits">116</span>
            

            

            <code class="ruby">        %w[left up]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="257">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="258">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="259">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="260">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="261">
            
            

            

            <code class="ruby">  # Function to determine the opposite direction between two cell x,y coordinates from the perspective of the snake</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="262">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def opposite_direction(x1, y1, x2, y2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="263">
            
            

            

            <code class="ruby">    # Set values to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="264">
            <span class="hits">726</span>
            

            

            <code class="ruby">    x1 = x1.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="265">
            <span class="hits">726</span>
            

            

            <code class="ruby">    y1 = y1.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="266">
            <span class="hits">726</span>
            

            

            <code class="ruby">    x2 = x2.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="267">
            <span class="hits">726</span>
            

            

            <code class="ruby">    y2 = y2.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="268">
            <span class="hits">726</span>
            

            

            <code class="ruby">    if x1 &lt; x2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="418" data-linenumber="269">
            <span class="hits">418</span>
            

            

            <code class="ruby">      &#39;left&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="308" data-linenumber="270">
            <span class="hits">308</span>
            

            

            <code class="ruby">    elsif x1 &gt; x2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="242" data-linenumber="271">
            <span class="hits">242</span>
            

            

            <code class="ruby">      &#39;right&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="66" data-linenumber="272">
            <span class="hits">66</span>
            

            

            <code class="ruby">    elsif y1 &lt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="43" data-linenumber="273">
            <span class="hits">43</span>
            

            

            <code class="ruby">      &#39;down&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="23" data-linenumber="274">
            <span class="hits">23</span>
            

            

            <code class="ruby">    elsif y1 &gt; y2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="275">
            <span class="hits">17</span>
            

            

            <code class="ruby">      &#39;up&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="276">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="277">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="278">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="279">
            
            

            

            <code class="ruby">  # Invert directions</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="280">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def invert_direction(direction)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="281">
            
            

            

            <code class="ruby">    case direction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="282">
            
            

            

            <code class="ruby">    when &#39;up&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="283">
            
            

            

            <code class="ruby">      &#39;down&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="284">
            
            

            

            <code class="ruby">    when &#39;down&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="285">
            
            

            

            <code class="ruby">      &#39;up&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="286">
            
            

            

            <code class="ruby">    when &#39;left&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="287">
            
            

            

            <code class="ruby">      &#39;right&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="288">
            
            

            

            <code class="ruby">    when &#39;right&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="289">
            
            

            

            <code class="ruby">      &#39;left&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="290">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="291">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="292">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="293">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="294">
            
            

            

            <code class="ruby">  # Given an x,y coordinate on the edge of the board, return the x,y coordinates of the cell on the opposite side of the board</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="295">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def opposite_edge_cell(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="296">
            
            

            

            <code class="ruby">    # Set values to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="297">
            
            

            

            <code class="ruby">    x = x.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="298">
            
            

            

            <code class="ruby">    y = y.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="299">
            
            

            

            <code class="ruby">    if x == 0</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="300">
            
            

            

            <code class="ruby">      { x: @width - 1, y: y }</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="301">
            
            

            

            <code class="ruby">    elsif x == @width - 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="302">
            
            

            

            <code class="ruby">      { x: 0, y: y }</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="303">
            
            

            

            <code class="ruby">    elsif y == 0</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="304">
            
            

            

            <code class="ruby">      { x: x, y: @height - 1 }</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="305">
            
            

            

            <code class="ruby">    elsif y == @height - 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="306">
            
            

            

            <code class="ruby">      { x: x, y: 0 }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="307">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="308">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="309">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="310">
            
            

            

            <code class="ruby">  # Function to find the neighbors of a given cell x,y coordinates</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="311">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def neighbors_of(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="312">
            <span class="hits">726</span>
            

            

            <code class="ruby">    adjacent_cells(x, y)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="313">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="314">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="315">
            
            

            

            <code class="ruby">  # My tail neighbors are the cells adjacent to my tail</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="316">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @my_tail_neighbors = adjacent_cells(@my_tail.first[:x], @my_tail.first[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="317">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="318">
            
            

            

            <code class="ruby">  # Cell base score</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="319">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @cell_base_score = 1000</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="320">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="321">
            
            

            

            <code class="ruby">  # If game mode is wrapped, use the following score multiplier array</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="322">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if @game_mode == &#39;wrapped&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="323">
            
            

            

            <code class="ruby">    #puts &#39;@@@ Using wrapped game mode score multiplier&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="324">
            
            

            

            <code class="ruby">    @score_multiplier = {</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="325">
            
            

            

            <code class="ruby">      &#39;wall&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="326">
            
            

            

            <code class="ruby">      &#39;hazard&#39; =&gt; -550,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="327">
            
            

            

            <code class="ruby">      &#39;hazard_adjacent&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="328">
            
            

            

            <code class="ruby">      &#39;food&#39; =&gt; 55,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="329">
            
            

            

            <code class="ruby">      &#39;food_hazard&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="330">
            
            

            

            <code class="ruby">      &#39;food_adjacent&#39; =&gt; 20,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="331">
            
            

            

            <code class="ruby">      &#39;shared_neighbor&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="332">
            
            

            

            <code class="ruby">      &#39;shared_shorter_snake&#39; =&gt; 45,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="333">
            
            

            

            <code class="ruby">      &#39;shared_longer_snake&#39; =&gt; -80,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="334">
            
            

            

            <code class="ruby">      &#39;shared_same_length_snake&#39; =&gt; -75,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="335">
            
            

            

            <code class="ruby">      &#39;empty&#39; =&gt; 55,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="336">
            
            

            

            <code class="ruby">      &#39;snake_head&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="337">
            
            

            

            <code class="ruby">      &#39;snake_body&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="338">
            
            

            

            <code class="ruby">      &#39;snake_body_neighbor&#39; =&gt; -20,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="339">
            
            

            

            <code class="ruby">      &#39;corner&#39; =&gt; -1,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="340">
            
            

            

            <code class="ruby">      &#39;other_snake_head&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="341">
            
            

            

            <code class="ruby">      &#39;other_snake_body&#39; =&gt; -30,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="342">
            
            

            

            <code class="ruby">      &#39;other_snake_head_neighbor&#39; =&gt; -0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="343">
            
            

            

            <code class="ruby">      &#39;body&#39; =&gt; -100,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="344">
            
            

            

            <code class="ruby">      &#39;head&#39; =&gt; -4,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="345">
            
            

            

            <code class="ruby">      &#39;tail&#39; =&gt; 2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="346">
            
            

            

            <code class="ruby">      &#39;my_tail&#39; =&gt; 6,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="347">
            
            

            

            <code class="ruby">      &#39;my_tail_neighbor&#39; =&gt; 20,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="348">
            
            

            

            <code class="ruby">      &#39;edge&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="349">
            
            

            

            <code class="ruby">      &#39;edge_adjacent&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="350">
            
            

            

            <code class="ruby">      &#39;head_neighbor&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="351">
            
            

            

            <code class="ruby">      &#39;three_head_neighbor&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="352">
            
            

            

            <code class="ruby">      &#39;shorter_snake_heads&#39; =&gt; 4</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="353">
            
            

            

            <code class="ruby">    }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="354">
            
            

            

            <code class="ruby">  else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="355">
            
            

            

            <code class="ruby">    # Set score multiplier for each type of cell</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="356">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @score_multiplier = {</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="357">
            
            

            

            <code class="ruby">      &#39;wall&#39; =&gt; -5,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="358">
            
            

            

            <code class="ruby">      &#39;hazard&#39; =&gt; -15,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="359">
            
            

            

            <code class="ruby">      &#39;hazard_adjacent&#39; =&gt; -7,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="360">
            
            

            

            <code class="ruby">      &#39;food&#39; =&gt; 15,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="361">
            
            

            

            <code class="ruby">      &#39;food_hazard&#39; =&gt; 2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="362">
            
            

            

            <code class="ruby">      &#39;food_adjacent&#39; =&gt; 2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="363">
            
            

            

            <code class="ruby">      &#39;shared_neighbor&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="364">
            
            

            

            <code class="ruby">      &#39;shared_shorter_snake&#39; =&gt; 5,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="365">
            
            

            

            <code class="ruby">      &#39;shared_longer_snake&#39; =&gt; -50,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="366">
            
            

            

            <code class="ruby">      &#39;shared_same_length_snake&#39; =&gt; -5,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="367">
            
            

            

            <code class="ruby">      &#39;empty&#39; =&gt; 8,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="368">
            
            

            

            <code class="ruby">      &#39;snake_head&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="369">
            
            

            

            <code class="ruby">      &#39;snake_body&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="370">
            
            

            

            <code class="ruby">      &#39;snake_body_neighbor&#39; =&gt; -10,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="371">
            
            

            

            <code class="ruby">      &#39;corner&#39; =&gt; -1,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="372">
            
            

            

            <code class="ruby">      &#39;other_snake_head&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="373">
            
            

            

            <code class="ruby">      &#39;other_snake_body&#39; =&gt; -130,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="374">
            
            

            

            <code class="ruby">      &#39;other_snake_head_neighbor&#39; =&gt; -0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="375">
            
            

            

            <code class="ruby">      &#39;body&#39; =&gt; -5,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="376">
            
            

            

            <code class="ruby">      &#39;head&#39; =&gt; -4,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="377">
            
            

            

            <code class="ruby">      &#39;tail&#39; =&gt; 2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="378">
            
            

            

            <code class="ruby">      &#39;my_tail&#39; =&gt; 76,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="379">
            
            

            

            <code class="ruby">      &#39;my_tail_neighbor&#39; =&gt; 12,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="380">
            
            

            

            <code class="ruby">      &#39;edge&#39; =&gt; -4,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="381">
            
            

            

            <code class="ruby">      &#39;edge_adjacent&#39; =&gt; -1,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="382">
            
            

            

            <code class="ruby">      &#39;head_neighbor&#39; =&gt; 0,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="383">
            
            

            

            <code class="ruby">      &#39;three_head_neighbor&#39; =&gt; -2,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="384">
            
            

            

            <code class="ruby">      &#39;shorter_snake_heads&#39; =&gt; 0</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="385">
            
            

            

            <code class="ruby">    }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="386">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="387">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="388">
            
            

            

            <code class="ruby">  # Create an array of all of this turn&#39;s cells. Each cell is a hash with x and y coordinates, a set of types, and the direction of the cell realative to the snake&#39;s head.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="389">
            
            

            

            <code class="ruby">  # A cell may have multiple types, such as a wall, a hazard, a food, a food_hazard, a shared_neighbor, a snake body, or a snake head.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="390">
            
            

            

            <code class="ruby">  # The direction is the direction of the cell relative to the snake&#39;s head.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="391">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="392">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @turn_score_array = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="393">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @board_hash.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="394">
            
            

            

            <code class="ruby">    # Check what types this cell&#39;s x and y coordinates are</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="395">
            <span class="hits">726</span>
            

            

            <code class="ruby">    types = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="396">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="397">
            
            

            

            <code class="ruby">    # Check if the cell is a wall</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="398">
            <span class="hits">726</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;wall&#39; if is_wall?(cell[:x], cell[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3630" data-linenumber="399">
            <span class="hits">3630</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;corner&#39; if @corners.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2299" data-linenumber="400">
            <span class="hits">2299</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;other_snake_head&#39; if @snakes_heads.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15972" data-linenumber="401">
            <span class="hits">15972</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;other_snake_body&#39; if @snakes_bodies.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5082" data-linenumber="402">
            <span class="hits">5082</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;body&#39; if @body.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2299" data-linenumber="403">
            <span class="hits">2299</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;tail&#39; if @snake_tails.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1452" data-linenumber="404">
            <span class="hits">1452</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;my_tail&#39; if @my_tail.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3630" data-linenumber="405">
            <span class="hits">3630</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;my_tail_neighbor&#39; if @my_tail_neighbors.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="406">
            
            

            

            <code class="ruby">    # types &lt;&lt; &#39;head&#39; if @head.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3630" data-linenumber="407">
            <span class="hits">3630</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;food&#39; if @food.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2299" data-linenumber="408">
            <span class="hits">2299</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;food_hazard&#39; if @food_hazards.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15851" data-linenumber="409">
            <span class="hits">15851</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;hazard&#39; if @hazards.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1089" data-linenumber="410">
            <span class="hits">1089</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;shared_neighbor&#39; if @shared_neighbors.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="411">
            <span class="hits">726</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;shared_shorter_snake&#39; if @shared_shorter_snakes.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1089" data-linenumber="412">
            <span class="hits">1089</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;shared_longer_snake&#39; if @shared_longer_snakes.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="413">
            <span class="hits">726</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;shared_same_length_snake&#39; if @shared_same_length_snakes.select do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="363" data-linenumber="414">
            <span class="hits">363</span>
            

            

            <code class="ruby">                                             c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="415">
            
            

            

            <code class="ruby">                                           end.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="80223" data-linenumber="416">
            <span class="hits">80223</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;empty&#39; if @empty_cells.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3630" data-linenumber="417">
            <span class="hits">3630</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;head_neighbor&#39; if @head_neighbors.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="32670" data-linenumber="418">
            <span class="hits">32670</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;edge&#39; if @edges.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4114" data-linenumber="419">
            <span class="hits">4114</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;other_snake_head_neighbor&#39; if @other_snakes_head_neighbors.select do |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] end.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61710" data-linenumber="420">
            <span class="hits">61710</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;snake_body_neighbor&#39; if @snakes_bodies_neighbors.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12342" data-linenumber="421">
            <span class="hits">12342</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;food_adjacent&#39; if @food_adjacent_cells.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61226" data-linenumber="422">
            <span class="hits">61226</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;hazard_adjacent&#39; if @hazard_adjacent_cells.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="128502" data-linenumber="423">
            <span class="hits">128502</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;edge_adjacent&#39; if @edge_adjacent_cells.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6534" data-linenumber="424">
            <span class="hits">6534</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;three_head_neighbor&#39; if @three_head_neighbors.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="425">
            <span class="hits">726</span>
            

            

            <code class="ruby">    types &lt;&lt; &#39;shorter_snake_heads&#39; if @shorter_snake_heads.select { |c| c[:x] == cell[:x] &amp;&amp; c[:y] == cell[:y] }.any?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="426">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="427">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="428">
            
            

            

            <code class="ruby">    # Determine the direction between this cell and the snake&#39;s head</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="429">
            <span class="hits">726</span>
            

            

            <code class="ruby">    direction = direction_between(@head[:x], @head[:y], cell[:x], cell[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="430">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="431">
            
            

            

            <code class="ruby">    # Determine the opposite direction between this cell and the snake&#39;s head</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="432">
            <span class="hits">726</span>
            

            

            <code class="ruby">    opposite_direction = opposite_direction(@head[:x], @head[:y], cell[:x], cell[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="433">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="434">
            
            

            

            <code class="ruby">    # Determine the possible directions between this cell and the snake&#39;s head</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="435">
            <span class="hits">726</span>
            

            

            <code class="ruby">    possible_directions = possible_directions_between(@head[:x], @head[:y], cell[:x], cell[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="436">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="437">
            
            

            

            <code class="ruby">    # Determine the neighbors of this cell</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="438">
            <span class="hits">726</span>
            

            

            <code class="ruby">    neighbors = neighbors_of(cell[:x], cell[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="439">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="440">
            
            

            

            <code class="ruby">    # Add x, y coordinates, types, and direction to the cell</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="441">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:x] = cell[:x]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="442">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:y] = cell[:y]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="443">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:types] = types</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="444">
            
            

            

            <code class="ruby">    # Each cell has a score, which is the sum of the @cell_base_score and score_multiplier for each type of cell</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="445">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:score] = if types.any?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="446">
            <span class="hits">726</span>
            

            

            <code class="ruby">                     types.map do |type|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2270" data-linenumber="447">
            <span class="hits">2270</span>
            

            

            <code class="ruby">                       @score_multiplier[type]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="448">
            
            

            

            <code class="ruby">                     end.reduce(:+) + @cell_base_score</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="449">
            
            

            

            <code class="ruby">                   else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="450">
            
            

            

            <code class="ruby">                     @cell_base_score</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="451">
            
            

            

            <code class="ruby">                   end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="452">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:direction] = direction</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="453">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:possible_directions] = possible_directions</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="454">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:opposite_direction] = opposite_direction</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="455">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:neighbors] = neighbors</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="456">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="457">
            
            

            

            <code class="ruby">    # Add the cell to the turn_score_array</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="458">
            <span class="hits">726</span>
            

            

            <code class="ruby">    @turn_score_array &lt;&lt; cell</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="459">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="460">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="461">
            
            

            

            <code class="ruby">  # puts &quot;Turn score array is: #{@turn_score_array}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="462">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="463">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="464">
            
            

            

            <code class="ruby">  # Direction of highest score cell in the @turn_score_array</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="732" data-linenumber="465">
            <span class="hits">732</span>
            

            

            <code class="ruby">  @highest_score_direction = @turn_score_array.max_by { |cell| cell[:score] }[:direction]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="466">
            <span class="hits">6</span>
            

            

            <code class="ruby">  puts &quot;Highest score cell direction is: #{@highest_score_direction}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="467">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="468">
            
            

            

            <code class="ruby">  # If our @health is above the @health_threshold, set the multiplier to 1</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="469">
            
            

            

            <code class="ruby">  # If our @health is below the @health_threshold, set the multiplier to 2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="470">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if @health &gt; @health_threshold</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="471">
            
            

            

            <code class="ruby">    @top_direction_score_multiplier = 0</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="472">
            
            

            

            <code class="ruby">  else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="473">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @top_direction_score_multiplier = 15</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="474">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="475">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="476">
            
            

            

            <code class="ruby">  # For every cell in the turn_score_array, add types &#39;top_direction&#39; if the cell&#39;s direction is the same as @highest_score_direction and increase the score by @top_direction_score_multiplier</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="477">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @turn_score_array.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="478">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:types] &lt;&lt; &#39;top_direction&#39; if cell[:direction] == @highest_score_direction</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="726" data-linenumber="479">
            <span class="hits">726</span>
            

            

            <code class="ruby">    cell[:score] += @top_direction_score_multiplier if cell[:types].include?(&#39;top_direction&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="480">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="481">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="482">
            
            

            

            <code class="ruby">  # For each direction, find the number of empty or food cells in that direction, and the total score of all cells in that direction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="483">
            
            

            

            <code class="ruby">  # takes the @@turn_score_array as input</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="484">
            <span class="hits">6</span>
            

            

            <code class="ruby">  def direction_scores(turn_score_array)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="485">
            
            

            

            <code class="ruby">    # Sum the score of each cell for each direction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="486">
            
            

            

            <code class="ruby">    @direction_scores = {</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="487">
            
            

            

            <code class="ruby">      &#39;left&#39; =&gt; turn_score_array.select { |cell| cell[:direction] == &#39;left&#39; }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="488">
            
            

            

            <code class="ruby">      &#39;right&#39; =&gt; turn_score_array.select { |cell| cell[:direction] == &#39;right&#39; }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="489">
            
            

            

            <code class="ruby">      &#39;up&#39; =&gt; turn_score_array.select { |cell| cell[:direction] == &#39;up&#39; }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="490">
            
            

            

            <code class="ruby">      &#39;down&#39; =&gt; turn_score_array.select { |cell| cell[:direction] == &#39;down&#39; }.map { |cell| cell[:score] }.reduce(:+)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="491">
            
            

            

            <code class="ruby">    }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="492">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="493">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="494">
            
            

            

            <code class="ruby">    # For each possible direction, find the number of empty or food cells in that direction, and the total score of all cells in that direction</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="495">
            <span class="hits">6</span>
            

            

            <code class="ruby">    def direction_scores_possible(turn_score_array)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="496">
            
            

            

            <code class="ruby">      # Sum the score of each cell for each direction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="497">
            
            

            

            <code class="ruby">      @direction_scores_possible = {</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="498">
            
            

            

            <code class="ruby">        &#39;left&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;left&#39;) }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="499">
            
            

            

            <code class="ruby">        &#39;right&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;right&#39;) }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="500">
            
            

            

            <code class="ruby">        &#39;up&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;up&#39;) }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="501">
            
            

            

            <code class="ruby">        &#39;down&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;down&#39;) }.map { |cell| cell[:score] }.reduce(:+)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="502">
            
            

            

            <code class="ruby">      }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="503">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="504">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="505">
            
            

            

            <code class="ruby">    # For each set of two possible directions, find the number of empty or food cells in that set of directions, and the total score of all cells in that direction</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="506">
            <span class="hits">6</span>
            

            

            <code class="ruby">    def direction_scores_possible_2(turn_score_array)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="507">
            
            

            

            <code class="ruby">      # Sum the score of each cell for each direction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="508">
            
            

            

            <code class="ruby">      @direction_scores_possible_2 = {</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="509">
            
            

            

            <code class="ruby">        &#39;left_up&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;left&#39;) &amp;&amp; cell[:possible_directions].include?(&#39;up&#39;) }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="510">
            
            

            

            <code class="ruby">        &#39;left_down&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;left&#39;) &amp;&amp; cell[:possible_directions].include?(&#39;down&#39;) }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="511">
            
            

            

            <code class="ruby">        &#39;right_up&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;right&#39;) &amp;&amp; cell[:possible_directions].include?(&#39;up&#39;) }.map { |cell| cell[:score] }.reduce(:+),</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="512">
            
            

            

            <code class="ruby">        &#39;right_down&#39; =&gt; turn_score_array.select { |cell| cell[:possible_directions].include?(&#39;right&#39;) &amp;&amp; cell[:possible_directions].include?(&#39;down&#39;) }.map { |cell| cell[:score] }.reduce(:+)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="513">
            
            

            

            <code class="ruby">      }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="514">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="515">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="516">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @possible_turns = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="517">
            
            

            

            <code class="ruby">  # Select my possible turns from the @turn_score_array. A possible turn is a direction to a head_neighbor that has a score greater than 0.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="732" data-linenumber="518">
            <span class="hits">732</span>
            

            

            <code class="ruby">  @turn_score_array.select { |cell| cell[:types].include?(&#39;head_neighbor&#39;) &amp;&amp; (cell[:score]).positive? }.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="519">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @possible_turns &lt;&lt; cell</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="520">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="521">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="522">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="523">
            
            

            

            <code class="ruby">  # If game mode is &#39;wrapped&#39;, if our head is on the edge of the map, find the cell on the opposite side of the map and add it to the @possible_turns</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="524">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if @game_mode == &#39;wrapped&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="525">
            
            

            

            <code class="ruby">    if @head[:x] == 0</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="526">
            
            

            

            <code class="ruby">      opposite_edge = opposite_edge_cell(@head[:x], @head[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="527">
            
            

            

            <code class="ruby">      @turn_score_array.select { |cell| cell[:x] == opposite_edge[:x] &amp;&amp; cell[:y] == opposite_edge[:y] &amp;&amp; (cell[:score]).positive? }.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="528">
            
            

            

            <code class="ruby">        # invert the direction of the cell</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="529">
            
            

            

            <code class="ruby">        cell[:direction] = invert_direction(cell[:direction])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="530">
            
            

            

            <code class="ruby">        @possible_turns &lt;&lt; cell</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="531">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="532">
            
            

            

            <code class="ruby">    elsif @head[:x] == @width - 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="533">
            
            

            

            <code class="ruby">      opposite_edge = opposite_edge_cell(@head[:x], @head[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="534">
            
            

            

            <code class="ruby">      @turn_score_array.select { |cell| cell[:x] == opposite_edge[:x] &amp;&amp; cell[:y] == opposite_edge[:y] &amp;&amp; (cell[:score]).positive? }.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="535">
            
            

            

            <code class="ruby">        # invert the direction of the cell</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="536">
            
            

            

            <code class="ruby">        cell[:direction] = invert_direction(cell[:direction])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="537">
            
            

            

            <code class="ruby">        @possible_turns &lt;&lt; cell</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="538">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="539">
            
            

            

            <code class="ruby">    elsif @head[:y] == 0</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="540">
            
            

            

            <code class="ruby">      opposite_edge = opposite_edge_cell(@head[:x], @head[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="541">
            
            

            

            <code class="ruby">      @turn_score_array.select { |cell| cell[:x] == opposite_edge[:x] &amp;&amp; cell[:y] == opposite_edge[:y] &amp;&amp; (cell[:score]).positive? }.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="542">
            
            

            

            <code class="ruby">        # invert the direction of the cell</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="543">
            
            

            

            <code class="ruby">        cell[:direction] = invert_direction(cell[:direction])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="544">
            
            

            

            <code class="ruby">        @possible_turns &lt;&lt; cell</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="545">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="546">
            
            

            

            <code class="ruby">    elsif @head[:y] == @height - 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="547">
            
            

            

            <code class="ruby">      opposite_edge = opposite_edge_cell(@head[:x], @head[:y])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="548">
            
            

            

            <code class="ruby">      @turn_score_array.select { |cell| cell[:x] == opposite_edge[:x] &amp;&amp; cell[:y] == opposite_edge[:y] &amp;&amp; (cell[:score]).positive? }.each do |cell|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="549">
            
            

            

            <code class="ruby">        # invert the direction of the cell</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="550">
            
            

            

            <code class="ruby">        cell[:direction] = invert_direction(cell[:direction])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="551">
            
            

            

            <code class="ruby">        @possible_turns &lt;&lt; cell</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="552">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="553">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="554">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="555">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="556">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="557">
            
            

            

            <code class="ruby">  # Load directions in @possible_turns into @possible_moves</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="25" data-linenumber="558">
            <span class="hits">25</span>
            

            

            <code class="ruby">  @possible_moves = @possible_turns.map { |cell| cell[:direction] }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="559">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="560">
            
            

            

            <code class="ruby">  # @possible_moves = [&#39;up&#39;, &#39;down&#39;, &#39;left&#39;, &#39;right&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="561">
            
            

            

            <code class="ruby">  # If head is at edge of board, then remove the direction from @possible_moves</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="562">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if @game_mode != &#39;wrapped&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="563">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @possible_moves.delete(&#39;left&#39;) if (@head[:x]).zero?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="564">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @possible_moves.delete(&#39;right&#39;) if @head[:x] == @width</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="565">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @possible_moves.delete(&#39;down&#39;) if (@head[:y]).zero?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="566">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @possible_moves.delete(&#39;up&#39;) if @head[:y] == @height</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="567">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="568">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="569">
            
            

            

            <code class="ruby">  # If game mode is &#39;wrapped&#39;, and head is at edge of board, then add the direction off the edge of the board to @possible_moves</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="570">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if @game_mode == &#39;wrapped&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="571">
            
            

            

            <code class="ruby">    @possible_moves.push(&#39;left&#39;) if (@head[:x]).zero?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="572">
            
            

            

            <code class="ruby">    @possible_moves.push(&#39;right&#39;) if @head[:x] == @width</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="573">
            
            

            

            <code class="ruby">    @possible_moves.push(&#39;down&#39;) if (@head[:y]).zero?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="574">
            
            

            

            <code class="ruby">    @possible_moves.push(&#39;up&#39;) if @head[:y] == @height</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="575">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="576">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="577">
            
            

            

            <code class="ruby">  # Once our snake&#39;s length is greater than that of any other snake.</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="578">
            
            

            

            <code class="ruby">  # then we need to find the direction of the nearest snake&#39;s head and set @move_direction to that direction if it is in @possible_moves</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="579">
            <span class="hits">6</span>
            

            

            <code class="ruby">  @snakes_info.each do |snake|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="580">
            <span class="hits">13</span>
            

            

            <code class="ruby">    next unless snake[:length] &lt; @length - 3</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="581">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="582">
            
            

            

            <code class="ruby">    puts &quot;Snake named #{snake[:name]} is shorter than me. It&#39;s length is #{snake[:length]} and mine is #{@length}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="583">
            
            

            

            <code class="ruby">    # Find the direction between our head and any shorter snake&#39;s head</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="584">
            
            

            

            <code class="ruby">    direction = direction_between(@head[:x], @head[:y], snake[:head][:x], snake[:head][:y])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="585">
            
            

            

            <code class="ruby">    # If the direction is in @possible_moves, then set @move_direction to that direction</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="586">
            
            

            

            <code class="ruby">    if @possible_moves.include?(direction)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="587">
            
            

            

            <code class="ruby">      puts &quot;I&#39;m going to move #{direction} because I&#39;m going to eat a snake named #{snake[:name]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="588">
            
            

            

            <code class="ruby">      @move_direction = direction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="589">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="590">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="591">
            
            

            

            <code class="ruby">    # If we are the longest by at least 2 cells, reduce our @health_threshold by 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="592">
            
            

            

            <code class="ruby">    if @length - snake[:length] &gt;= 5</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="593">
            
            

            

            <code class="ruby">      @health_threshold -= 1</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="594">
            
            

            

            <code class="ruby">      # Clamp the health threshold to a minimum of 55</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="595">
            
            

            

            <code class="ruby">      @health_threshold = 55 if @health_threshold &lt; 55</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="596">
            
            

            

            <code class="ruby">      puts &quot;I&#39;m going to eat a snake named #{snake[:name]}. I&#39;m going to reduce my health_threshold by 1 to #{@health_threshold}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="597">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="598">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="599">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="600">
            
            

            

            <code class="ruby">  # Get highest score in @possible_turns</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="25" data-linenumber="601">
            <span class="hits">25</span>
            

            

            <code class="ruby">  @highest_score = @possible_turns.max_by { |turn| turn[:score] }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="602">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="603">
            
            

            

            <code class="ruby">  # Set @move_direction to the direction of the highest score object</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="604">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if @highest_score.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="605">
            
            

            

            <code class="ruby">    @move_direction = &#39;up&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="606">
            
            

            

            <code class="ruby">  else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="607">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @move_direction = @highest_score[:direction]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="608">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="609">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="610">
            
            

            

            <code class="ruby">  #puts &quot;Move direction is: #{@move_direction} - highest score is: #{@highest_score[:score]} - turn is: #{@highest_score[:types]} to the #{@highest_score[:direction]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="611">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="612">
            
            

            

            <code class="ruby">  #TODO Function to use A* to find the safest path to food</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="613">
            
            

            

            <code class="ruby">  # A safe path is one that stays away from longer snakes, bodies, and hazards</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="614">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="615">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="616">
            
            

            

            <code class="ruby">  # Output the end time in ms</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="617">
            <span class="hits">6</span>
            

            

            <code class="ruby">  end_time = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="618">
            <span class="hits">6</span>
            

            

            <code class="ruby">  puts &quot;End time is: #{end_time} - took #{end_time - start_time} seconds&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="619">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="620">
            <span class="hits">6</span>
            

            

            <code class="ruby">  debug = false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="621">
            
            

            

            <code class="ruby"># Debug output, only if debug is true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="622">
            <span class="hits">6</span>
            

            

            <code class="ruby">  if debug</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="623">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="624">
            
            

            

            <code class="ruby">  puts &quot;Possible moves are: </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="625">
            
            

            

            <code class="ruby">  #{@possible_moves}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="626">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="627">
            
            

            

            <code class="ruby">  puts &quot;possible_turns are: </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="628">
            
            

            

            <code class="ruby">  #{@possible_turns}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="629">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="630">
            
            

            

            <code class="ruby">  puts &quot;Highest score is #{@highest_score}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="631">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="632">
            
            

            

            <code class="ruby">  # Most common cell types from @turn_score_array and their counts and scores</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="633">
            
            

            

            <code class="ruby">  @turn_score_array.group_by { |cell| cell[:types] }.map { |types, cells| [types, cells.count] }.sort_by { |types, count| count }.reverse.each do |types, count|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="634">
            
            

            

            <code class="ruby">    puts &quot;Most common #{types} - #{count}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="635">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="636">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="637">
            
            

            

            <code class="ruby">  # Least common 5 cell types from @turn_score_array and their counts</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="638">
            
            

            

            <code class="ruby">  @turn_score_array.group_by { |cell| cell[:types] }.map { |types, cells| [types, cells.count] }.sort_by { |types, count| count }.first(5).each do |types, count|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="639">
            
            

            

            <code class="ruby">    puts &quot;Least common #{types} - #{count}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="640">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="641">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="642">
            
            

            

            <code class="ruby">  # Top 5 highest scores from @turn_score_array and their counts</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="643">
            
            

            

            <code class="ruby">  @turn_score_array.group_by { |cell| cell[:score] }.map { |score, cells| [score, cells.count] }.sort_by { |score, count| score }.reverse.first(5).each do |score, count|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="644">
            
            

            

            <code class="ruby">    puts &quot;highest scores #{score} - #{count}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="645">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="646">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="647">
            
            

            

            <code class="ruby">  # Lowest 5 scores from @turn_score_array and their counts</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="648">
            
            

            

            <code class="ruby">  @turn_score_array.group_by { |cell| cell[:score] }.map { |score, cells| [score, cells.count] }.sort_by { |score, count| score }.first(5).each do |score, count|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="649">
            
            

            

            <code class="ruby">    puts &quot;lowest scores #{score} - #{count}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="650">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="651">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="652">
            
            

            

            <code class="ruby">  # Most common cell types and score combinations from @turn_score_array</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="653">
            
            

            

            <code class="ruby">  @turn_score_array.group_by { |cell| cell[:types] }.map { |types, cells| [types, cells.map { |cell| cell[:score] }.reduce(:+)] }.sort_by { |types, score| score }.reverse.each do |types, score|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="654">
            
            

            

            <code class="ruby">    puts &quot;Most common #{types} - #{score}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="655">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="656">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="657">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="658">
            
            

            

            <code class="ruby">  # TODO:</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="659">
            
            

            

            <code class="ruby">  # Generate a ascii representation of the board</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="660">
            
            

            

            <code class="ruby">  # Cells are placed in their x,y coordianres on a grid the of size @width x @height</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="661">
            
            

            

            <code class="ruby">  # Each cell is represented by a single character</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="662">
            
            

            

            <code class="ruby">  # Board edges are represented by &#39;#&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="663">
            
            

            

            <code class="ruby">  # Food is represented by &#39;F&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="664">
            
            

            

            <code class="ruby">  # Snake head is represented by &#39;H&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="665">
            
            

            

            <code class="ruby">  # Snake body is represented by &#39;B&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="666">
            
            

            

            <code class="ruby">  # Snake tail is represented by &#39;T&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="667">
            
            

            

            <code class="ruby">  # Empty cells are represented by &#39;0&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="668">
            
            

            

            <code class="ruby">  # Snake head neighbors are represented by &#39;h&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="669">
            
            

            

            <code class="ruby">  # Snake body neighbors are represented by &#39;b&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="670">
            
            

            

            <code class="ruby">  # Hazard cells are represented by &#39;X&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="671">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="672">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="673">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="674">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="675">
            <span class="hits">6</span>
            

            

            <code class="ruby">  puts &quot;MOVE: #{@move_direction} - TURN: #{board[:turn]}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="676">
            <span class="hits">6</span>
            

            

            <code class="ruby">  { &quot;move&quot;: @move_direction }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="677">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="a0fd061293fd095d34df636e6fce494a596225be">
  <div class="header">
    <h3>snakes/ruby/djdefi/app/util.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>5</b> relevant lines.
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="never" data-hits="" data-linenumber="1">
            
            

            

            <code class="ruby"># frozen_string_literal: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;active_support/all&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby"># Turns a hash from { hi_there: true } to { &quot;hiThere&quot;: true } to match engine</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"># syntax.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">def camelcase(hash)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="8">
            <span class="hits">18</span>
            

            

            <code class="ruby">  hash.deep_transform_keys { |key| key.to_s.camelize(:lower) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"># Turns a hash from { &quot;hiThere&quot;: true } to { hi_there: true } to match ruby</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby"># like syntax.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="13">
            <span class="hits">1</span>
            

            

            <code class="ruby">def underscore(hash)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="918" data-linenumber="14">
            <span class="hits">918</span>
            

            

            <code class="ruby">  hash.deep_transform_keys { |key| key.to_s.underscore.to_sym }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
